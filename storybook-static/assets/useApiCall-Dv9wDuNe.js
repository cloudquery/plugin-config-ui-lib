import{r as p}from"./index-l2PZgWEW.js";import{a as $,b as E,s as P,H as R,m as C,d as m,I as S,J as j,e as q,K as M}from"./index-CwmUooIP.js";import{j as g}from"./jsx-runtime-DWbWqHZ-.js";import{C as _}from"./CircularProgress-Cj3O-II6.js";function z(o,t,n=void 0){const a={};for(const l in o){const e=o[l];let c="";for(let i=0;i<e.length;i+=1){const r=e[i];r&&(c+=t(r)+" ",n&&n[r]&&(c+=n[r]+" "))}a[l]=c}return a}function w(o){return E("MuiLoadingButton",o)}const d=$("MuiLoadingButton",["root","label","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),N=o=>{const{loading:t,loadingPosition:n,classes:a}=o,l={root:["root",t&&"loading"],label:["label"],startIcon:[t&&`startIconLoading${m(n)}`],endIcon:[t&&`endIconLoading${m(n)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${m(n)}`]},e=z(l,w,a);return{...a,...e}},W=o=>o!=="ownerState"&&o!=="theme"&&o!=="sx"&&o!=="as"&&o!=="classes",k=P(R,{shouldForwardProp:o=>W(o)||o==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(o,t)=>[t.root,t.startIconLoadingStart&&{[`& .${d.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${d.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})(C(({theme:o})=>({display:"inline-flex",[`& .${d.startIconLoadingStart}, & .${d.endIconLoadingEnd}`]:{transition:o.transitions.create(["opacity"],{duration:o.transitions.duration.short}),opacity:0},variants:[{props:{loadingPosition:"center"},style:{transition:o.transitions.create(["background-color","box-shadow","border-color"],{duration:o.transitions.duration.short}),[`&.${d.loading}`]:{color:"transparent"}}},{props:({ownerState:t})=>t.loadingPosition==="start"&&t.fullWidth,style:{[`& .${d.startIconLoadingStart}, & .${d.endIconLoadingEnd}`]:{transition:o.transitions.create(["opacity"],{duration:o.transitions.duration.short}),opacity:0,marginRight:-8}}},{props:({ownerState:t})=>t.loadingPosition==="end"&&t.fullWidth,style:{[`& .${d.startIconLoadingStart}, & .${d.endIconLoadingEnd}`]:{transition:o.transitions.create(["opacity"],{duration:o.transitions.duration.short}),opacity:0,marginLeft:-8}}}]}))),A=P("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(o,t)=>{const{ownerState:n}=o;return[t.loadingIndicator,t[`loadingIndicator${m(n.loadingPosition)}`]]}})(C(({theme:o})=>({position:"absolute",visibility:"visible",display:"flex",variants:[{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:({loadingPosition:t,ownerState:n})=>t==="start"&&n.size!=="small",style:{left:14}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(o.vars||o).palette.action.disabled}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:({loadingPosition:t,ownerState:n})=>t==="end"&&n.size!=="small",style:{right:14}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:({ownerState:t})=>t.loadingPosition==="start"&&t.fullWidth,style:{position:"relative",left:-10}},{props:({ownerState:t})=>t.loadingPosition==="end"&&t.fullWidth,style:{position:"relative",right:-10}}]}))),B=P("span",{name:"MuiLoadingButton",slot:"Label",overridesResolver:(o,t)=>[t.label]})({display:"inherit",alignItems:"inherit",justifyContent:"inherit"}),K=p.forwardRef(function(t,n){const a=p.useContext(S),l=j(a,t),e=q({props:l,name:"MuiLoadingButton"}),{children:c,disabled:i=!1,id:r,loading:f=!1,loadingIndicator:h,loadingPosition:y="center",variant:I="text",...s}=e,L=M(r),v=h??g.jsx(_,{"aria-labelledby":L,color:"inherit",size:16}),u={...e,disabled:i,loading:f,loadingIndicator:v,loadingPosition:y,variant:I},b=N(u),x=f?g.jsx(A,{className:b.loadingIndicator,ownerState:u,children:v}):null;return g.jsxs(k,{disabled:i||f,id:L,ref:n,...s,variant:I,classes:b,ownerState:u,children:[u.loadingPosition==="end"?g.jsx(B,{className:b.label,children:c}):x,u.loadingPosition==="end"?x:g.jsx(B,{className:b.label,children:c})]})});function T(o=7){return Math.random().toString(36).slice(o)}function U(o){const t=p.useRef([]),n=p.useCallback((a,l,e,c)=>{let i=null;const r=T();return{requestPromise:new Promise((y,I)=>{o.sendMessage("api_call_request",{endpoint:a,method:l,id:r,body:e,options:c}),i=o.subscribeToMessage("api_call_response",s=>{s.id===r&&(i==null||i(),t.current=t.current.filter(L=>L!==i),s.ok?y({body:s.body,endpoint:s.endpoint,headers:s.headers,status:s.status}):I({body:s.body,endpoint:s.endpoint,headers:s.headers,status:s.status}))}),t.current.push(i)}),abortRequest:()=>{o.sendMessage("api_call_abort_request",{id:r})},requestId:r}},[o]);return p.useEffect(()=>()=>{for(const a of t.current)a&&a()},[]),{callApi:n}}export{K as L,T as g,U as u};
